"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const authentication_1 = require("./authentication");
const middleware_1 = require("./middleware");
const sequelize_1 = require("./sequelize");
const app_hooks_1 = require("./app.hooks");
const path = require('path');
const favicon = require('serve-favicon');
const compress = require('compression');
const cors = require('cors');
const helmet = require('helmet');
const bodyParser = require('body-parser');
const feathers = require('feathers');
const configuration = require('feathers-configuration');
const hooks = require('feathers-hooks');
const rest = require('feathers-rest');
const socketio = require('feathers-socketio');
const handler = require('feathers-errors/handler');
const notFound = require('feathers-errors/not-found');
const services = require('./services');
const authentication = new authentication_1.default();
const middleware = new middleware_1.default();
const sequelize = new sequelize_1.default();
const app = feathers();
app.configure(configuration());
app.use(cors());
app.use(helmet());
app.use(compress());
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));
app.use(favicon(path.join(app.get('public'), 'favicon.ico')));
app.use('/', feathers.static(app.get('public')));
app.configure(hooks());
sequelize.set(app);
app.configure(rest());
app.configure(socketio());
middleware.set(app);
authentication.set(app);
app.configure(services);
app.use(notFound());
app.use(handler());
app.hooks(app_hooks_1.default);
exports.default = app;
